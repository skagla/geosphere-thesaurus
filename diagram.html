<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Thesaurus - Visual Relations</title>

    <link
      rel="stylesheet"
      href="https://bootswatch.com/4/simplex/bootstrap.min.css" />
    <link rel="stylesheet" href="css/FontAwesome/all.min.css" />

    <link
      rel="stylesheet"
      href="https://visjs.github.io/vis-network/dist/vis-network.min.css"
      media="screen"
      charset="utf-8" />

    <script src="js/jquery.min.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>

    <script
      type="text/javascript"
      src="https://visjs.github.io/vis-network/dist/vis-network.min.js"></script>
    <script src="js/lang.js"></script>
    <script src="js/config.js"></script>
    <script src="js/ws.js"></script>
    <script src="js/visNet.js"></script>
    <script src="js/d3_data.js"></script>
    <!--<script src="js/d3_radial.js"></script>-->
    <script src="js/d3_tree.js"></script>
    <!--script src="js/d3_circle.js"></!--script-->
    <script src="js/echarts.js"></script>
    <script src="js/echarts_circle.js"></script>
    <script src="js/echarts_sunburst.js"></script>

    <style>
      /* Custom styles for the layout */
      body {
        font-family:
          "Open Sans",
          -apple-system,
          BlinkMacSystemFont,
          "Segoe UI",
          Roboto,
          "Helvetica Neue",
          Arial,
          sans-serif,
          "Apple Color Emoji",
          "Segoe UI Emoji",
          "Segoe UI Symbol";
        display: flex;
        flex-direction: column;
        min-height: 100vh;
        background-color: #f8f9fa;
      }

      /* Prevent body scroll when a panel is maximized */
      body.panel-maximized {
        overflow: hidden;
      }

      .site-header {
        background-color: #343a40;
        color: white;
        padding: 0.1rem;
        border-bottom: 4px solid #007bff;
        transition: transform 0.3s ease;
      }

      .main-content {
        flex-grow: 1;
        display: flex;
        align-items: stretch;
      }

      .panel-container {
        width: 100%;
      }

      .panel {
        position: relative; /* Needed for absolute positioning of the control button */
        background-color: #ffffff;
        border-radius: 0.5rem;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease-in-out; /* Smooth transition for all properties */
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        min-height: 300px;
      }

      .panel:not(.maximized):hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
        cursor: pointer;
      }

      /* Styles for the maximized panel */
      .panel.maximized {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        border-radius: 0;
        z-index: 1050; /* High z-index to be on top of everything */
        overflow: auto; /* Allow content to scroll if it overflows */
      }

      /* Hide other elements when a panel is maximized for a clean view */
      body.panel-maximized .site-header,
      body.panel-maximized .site-footer,
      body.panel-maximized .panel:not(.maximized) {
        display: none;
      }

      .panel h3 {
        color: #007bff;
      }

      .panel p {
        color: #6c757d;
      }

      /* Panel control button for maximize/restore */
      .panel-controls {
        position: absolute;
        top: 15px;
        right: 15px;
        z-index: 10; /* Ensure it's above panel content */
      }

      .btn-toggle-size {
        background-color: rgba(255, 255, 255, 0.7);
        border: 1px solid #ddd;
        backdrop-filter: blur(2px);
      }

      .site-footer {
        background-color: #343a40;
        color: white;
        padding: 1rem;
        text-align: center;
        margin-top: auto;
        transition: transform 0.3s ease;
      }

      #mynetwork {
        position: absolute;
        top: 24px;
        left: 0px;
        right: 0px;
        bottom: 24px;
        overflow: hidden; /* Prevents overflow */
      }

      p.lead {
        margin-top: -8px;
        margin-bottom: 4px;
      }
    </style>

    <script>
      function onResize() {}
    </script>
  </head>
  <body onload="onResize()" onresize="onResize()">
    <!-- Header Section -->
    <!-- <header class="site-header text-center">
      <h2>Visual Relations</h2>
      <p class="lead">Use widgets below to analyze related items</p>
    </header> -->

    <!-- Main Section -->
    <main class="main-content">
      <div class="w-100 d-flex flex-column pt-2 text-center bg-white">
        <h5 id="stackContent" class=""></h5>
        <div id="divDiagram" class="w-100 h-100 flex-grow-1"></div>
        <div class="w-100 border border-1 p-2 d-flex flex-column text-left">
          <p class="m-0 font-weight-bold">Navigation:</p>
          <p class="m-0">
            <span class="font-italic">left mouse button: </span>
            click on a circle to zoom in. click on the background to zoom out
          </p>
          <p class="m-0">
            <span class="font-italic">right mouse button: </span> click on a
            circle to get to the corresponding thesaurus page
          </p>
        </div>
      </div>
    </main>

    <!-- Footer Section -->
    <!-- <footer class="site-footer"></footer> -->

    <!-- jQuery and Bootstrap JS Bundle (Popper.js included) -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      $(document).ready(function () {
        config.init(false);

        d3data.init(function (data, filteredData) {
          if (filteredData) data = filteredData;
          let conf = config.projectConfiguration[d3data._project];
          if (!conf) {
            alert("Configuration not found for this uri.");
            return;
          }
          if (conf.diagram == "tree") {
            let chart = treeChart(data);
            d3.select("#divDiagram").append(() => chart);
          } else if (conf.diagram == "sunburst") {
            eCharts_sunburstChart(data, "divDiagram");
          } else if (conf.diagram == "circle") {
            eCharts_circleChart(data, "divDiagram");
          } else {
            // Default to tree chart if no specific diagram type is set
            let chart = treeChart(data);
            d3.select("#divDiagram").append(() => chart);
          }
        }, 4);
      });
    </script>
  </body>
</html>
